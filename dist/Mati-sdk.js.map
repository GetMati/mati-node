{"version":3,"file":"Mati-sdk.js","sources":["../node_modules/strict-uri-encode/index.js","../node_modules/decode-uri-component/index.js","../node_modules/query-string/index.js","../src/matiBase.js","../src/mati.js","../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/process-es6/browser.js","../src/matiWebhook.js","../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, index) => {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, options),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (key, value) => {\n\t\t\t\treturn value === null ? [encode(key, options), '[]'].join('') : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (key, value) => {\n\t\t\t\treturn value === null ? encode(key, options) : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({decode: true, arrayFormat: 'none'}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = param.replace(/\\+/g, ' ').split('=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\treturn Object.keys(ret).sort().reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (obj, options) => {\n\tconst defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\toptions = Object.assign(defaults, options);\n\n\tif (options.sort === false) {\n\t\toptions.sort = () => {};\n\t}\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\treturn obj ? Object.keys(obj).sort(options.sort).map(key => {\n\t\tconst value = obj[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tconst result = [];\n\n\t\t\tfor (const value2 of value.slice()) {\n\t\t\t\tif (value2 === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, value2, result.length));\n\t\t\t}\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&') : '';\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: input.split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","\nimport axios from 'axios'\nimport queryString from 'query-string'\nconst matiURL = 'https://api.mati.io'\n\n/**\n * @private\n * @class MatiBase\n * @classdesc The main Mati SDK class. It is marked as private so\n * that it doesn't show up in the docs because it is never used directly.\n * @arg {Object} options\n * @arg {String} [options.accessToken] - An access token for making authenticated\n * requests.\n * @arg {String} [options.clientId] - The client id for your app. Used to create\n * authentication URL.\n * @arg {String} [options.clientSecret] - The client secret for your app.\n * @arg {String} [options.baseURL] - Base url, default matiURL\n */\n\nexport class MatiBase {\n  constructor (options) {\n    options = options || {}\n    this.accessToken = options.accessToken\n    this.clientId = options.clientId\n    this.clientSecret = options.clientSecret\n    this.http = axios.create({\n      baseURL: options.baseURL || matiURL\n    })\n    this.timeout = new Date().getTime() + 10000\n    this.getAccessTokenFromCode()\n    this.authInterceptor()\n  }\n\n  /**\n   * Set the access token used to authenticate requests to the API.\n   * @arg {String} accessToken - An access token\n   * @returns {undefined}\n   */\n  setAccessToken (token) {\n    this.accessToken = token\n  }\n\n  /**\n   * Get the access token\n   * @returns {String} Access token\n   */\n  getAccessToken () {\n    return this.accessToken\n  }\n\n  /**\n   * Set the client id, which is used to help gain an access token.\n   * @arg {String} clientId - Your apps client id\n   * @returns {undefined}\n   */\n  setClientId (clientId) {\n    this.clientId = clientId\n  }\n\n  /**\n   * Get the client id\n   * @returns {String} Client id\n   */\n  getClientId () {\n    return this.clientId\n  }\n\n  /**\n   * Set the client secret\n   * @arg {String} clientSecret - Your app's client secret\n   * @returns {undefined}\n   */\n  setClientSecret (clientSecret) {\n    this.clientSecret = clientSecret\n  }\n\n  /**\n   * Get the client secret\n   * @returns {String} Client secret\n   */\n  getClientSecret () {\n    return this.clientSecret\n  }\n\n  /**\n   * Verify if token is valid\n   * @returns {Boolean}\n   */\n  isTokenValid () {\n    if (new Date().getTime() > this.timeout) return true\n    return false\n  }\n\n  /**\n   * Get an OAuth2 access token from an client credentials.\n   * @returns {Object}\n  */\n  async issueToken () {\n    const clientId = this.getClientId()\n    const clientSecret = this.getClientSecret()\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      auth: {\n        username: clientId,\n        password: clientSecret\n      },\n      data: queryString.stringify({ grant_type: 'client_credentials', scope: 'identity' }),\n      url: '/oauth/token'\n    }\n    const response = await this.http(options)\n    return response\n  }\n\n  /**\n   * Http client Auth interceptor.\n   * @returns {Object}\n  */\n  authInterceptor () {\n    this.http.interceptors.request.use(async (config) => {\n      let originalRequest = config\n\n      if (this.isTokenValid()) {\n        this.timeout = new Date().getTime() + 10000\n        try {\n          const token = await this.issueToken()\n          this.setAccessToken(token.data.access_token)\n          originalRequest.headers['Authorization'] = 'Bearer ' + token.data.access_token\n          const response = await originalRequest\n          return response\n        } catch (error) {\n          this.timeout = new Date().getTime()\n          throw error\n        }\n      }\n      return config\n    }, (err) => {\n      return Promise.reject(err)\n    })\n  }\n\n  /**\n   Get an OAuth2 access token from an client credentials.\n   * @returns {undefined}\n  */\n  async getAccessTokenFromCode () {\n    const clientId = this.getClientId()\n    const clientSecret = this.getClientSecret()\n\n    if (!clientId) {\n      throw new Error('A client id is required.')\n    }\n    if (!clientSecret) {\n      throw new Error('A client secret is required.')\n    }\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      auth: {\n        username: clientId,\n        password: clientSecret\n      },\n      data: queryString.stringify({ grant_type: 'client_credentials', scope: 'identity' }),\n      url: '/oauth/token'\n    }\n\n    try {\n      const response = await this.http(options)\n      return this.setAccessToken(response.data.access_token)\n    } catch (error) {\n      throw error\n    }\n  }\n\n  async request (mt, path, args) {\n    const options = {\n      method: mt,\n      headers: {\n        'Authorization': `Bearer ${this.getAccessToken()}`,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      data: queryString.stringify(args),\n      url: path\n    }\n    try {\n      const response = await this.http(options)\n      if (response.status === 204) {\n        return {'message': 'success'}\n      }\n      return response.data\n    } catch (error) {\n      throw error\n    }\n  }\n\n  async uploadRequest (mt, path, data) {\n    const options = {\n      method: mt,\n      headers: {\n        'Authorization': `Bearer ${this.getAccessToken()}`,\n        'Content-Type': `multipart/form-data; boundary=${data._boundary}`\n      },\n      data,\n      url: path\n    }\n\n    try {\n      const response = await this.http(options)\n      return response.data\n    } catch (error) {\n      throw error\n    }\n  }\n}\n","import {MatiBase} from './matiBase'\nimport FormData from 'form-data'\n\n/**\n * @class Mati\n * @extends MatiBase\n * @classdesc The Mati SDK class that provides methods to read, write and\n * create identities.\n * @arg {Object} options requests.\n */\n\nexport class Mati extends MatiBase {\n  /**\n   * @description Create a webhook subscription on your mati account.\n   * @function Mati#subscribeWebhook\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.url] - Your webhook url\n   * @arg {string} [opts.secret] - Your webhook secret\n   * @returns {Promise} Resolves to webhook subscription created response\n   */\n  subscribeWebhook (opts) {\n    return this.request('POST', '/v1/webhooks', opts)\n  };\n\n  /**\n   * @description Get a single webhook subscription by id.\n   * @function Mati#getSubscription\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.id] - Your webhook id\n   * @returns {Promise} Resolves to webhook single subscription\n   */\n  getSubscription (opts) {\n    return this.request('GET', `/v1/webhooks/${opts.id}`)\n  };\n\n  /**\n   * @description List all your webhook subscriptions on your mati account.\n   * @function Mati#listSubscriptions\n   * @memberof Mati\n   * @returns {Promise} Resolves to webhook subscriptions list response\n   */\n  listSubscriptions () {\n    return this.request('GET', '/v1/webhooks')\n  };\n\n  /**\n   * @description Delete webhook subscription by id.\n   * @function Mati#deleteSubscription\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.id] - Your webhook id\n   * @returns {Promise} Resolves to webhook delete subscription response\n   */\n  deleteSubscription (opts) {\n    return this.request('DELETE', `/v1/webhooks/${opts.id}`)\n  };\n\n  /**\n   * @description Create new Identity on your mati account.\n   * @function Mati#createIdentity\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {object} [opts.metadata] - Your metadata information\n   * @arg {object} [opts.file] - Media object\n   * @returns {Promise} Resolves to identity created response\n   */\n  createIdentity (opts) {\n    let data = new FormData()\n\n    if (opts !== undefined) {\n      if (opts.metadata) {\n        for (var key in opts.metadata) {\n          if (opts.metadata.hasOwnProperty(key)) {\n            data.append('metadata[' + key + ']', opts.metadata[key])\n          }\n        }\n      }\n      if (opts.file) {\n        data.append('photo', opts.file, 'identity.jpeg')\n      }\n    }\n\n    return this.uploadRequest('POST', `/v1/identities`, data)\n  };\n\n\n  /**\n   * @description List all identities on your Mati account.\n   * @function Mati#listIdentities\n   * @memberof Mati\n   * @returns {Promise} Resolves to your Mati account identity list\n   */\n  listIdentities () {\n    return this.request('GET', `/v1/identities`)\n  };\n\n  /**\n   * @description Get single identity by id.\n   * @function Mati#getIdentity\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.id] - Your webhook id\n   * @returns {Promise} Resolves to identity response\n   */\n  getIdentity (opts) {\n    return this.request('GET', `/v1/identities/${opts.id}`)\n  };\n\n  /**\n   * @description Upload document front image.\n   * @function Mati#uploadIdFront\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.identityId] - IdentityId\n   * @arg {string} [opts.type] - Document type (default = 'national-id')\n   * @arg {object} [opts.file] - Media object\n   * @returns {Promise} Resolves to document front upload response\n   */\n  uploadIdFront (opts) {\n    if (!opts.file || !opts.identityId) throw Error\n    let data = new FormData()\n    data.append('type', opts.type || 'national-id')\n    data.append('side', 'front')\n    data.append('picture', opts.file, 'front.jpeg')\n    return this.uploadRequest('POST', `/v1/identities/${opts.identityId}/documents`, data)\n  };\n\n  /**\n   * @description Upload document back image.\n   * @function Mati#uploadIdBack\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.documentId] - DocumentId\n   * @arg {object} [opts.file] - Media object\n   * @returns {Promise} Resolves to document back upload response\n   */\n  uploadIdBack (opts) {\n    if (!opts.file || !opts.documentId) throw Error\n    let data = new FormData()\n    data.append('side', 'back')\n    data.append('picture', opts.file, 'front.jpeg')\n    return this.uploadRequest('PUT', `/v1/documents/${opts.documentId}`, data)\n  };\n\n  /**\n   * @description Update document fields.\n   * @function Mati#updateFields\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.documentId] - DocumentId\n   * @arg {object} [opts.fields] - Fields to modify\n   * @returns {Promise} Resolves to update fields response\n   */\n  updateFields (opts) {\n    return this.request('PATCH', `/v1/documents/${opts.documentId}`, opts.fields)\n  };\n\n  /**\n   * @description Get all documents by identity id.\n   * @function Mati#listDocuments\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.identityId] - IdentityId\n   * @returns {Promise} Resolves to identity document list\n   */\n  listDocuments (opts) {\n    return this.request('GET', `/v1/identities/${opts.identityId}/documents`)\n  };\n\n  /**\n   * @description Get single document by document id.\n   * @function Mati#getDocument\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.documentId] - DocumentId\n   * @returns {Promise} Resolves to document details response\n   */\n  getDocument (opts) {\n    return this.request('GET', `/v1/documents/${opts.documentId}`)\n  };\n\n  /**\n   * @description Get document verified data by document id.\n   * @function Mati#getVerifiedData\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.documentId] - DocumentId\n   * @returns {Promise} Resolves to document verified data response\n   */\n  getVerifiedData (opts) {\n    return this.request('GET', `/v1/documents/${opts.documentId}/verified-data`)\n  };\n\n  /**\n   * @description Get list of pictures of the document by document id.\n   * @function Mati#listDocumentPictures\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.documentId] - DocumentId\n   * @returns {Promise} Resolves to pictures list response\n   */\n  listPictures (opts) {\n    return this.request('GET', `/v1/documents/${opts.documentId}/pictures`)\n  };\n\n  /**\n   * @description Get single picture by pictureId id.\n   * @function Mati#getDocument\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.pictureId] - PictureId\n   * @returns {Promise} Resolves to picture details response\n   */\n  getPicture (data) {\n    return this.request('GET', `/v1/pictures/${data.pictureId}`)\n  };\n\n  /**\n   * @description Download single picture by id.\n   * @function Mati#getDocument\n   * @memberof Mati\n   * @arg {object} [opts] - options\n   * @arg {string} [opts.documentId] - IdentityId\n   * @returns {Promise} Resolves to pictures download response\n   */\n  downloadPicture (data) {\n    return this.request('GET', `/v1/pictures/${data.documentId}.jpg`)\n  };\n}\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","/**\n Utility function to validate an incoming request is indeed from Mati\n @param {string} matiHeader - The value of the X-signature header from the request\n @param {string} secret - The webhook secret that you registered with the webhook\n @param {object} payloadBody - the body of the webhook response\n */\n\nconst validateRequest = (matiHeader, secret, payloadBody) => {\n  const payload = JSON.stringify(payloadBody)\n  const computedSignature = crypto.createHmac('sha256', secret).update(payload).digest('hex')\n  return matiHeader === computedSignature\n}\n\n/**\n  Express middleware to accompany a Mati webhook. Provides Mati\n  request validation.\n\n  Options:\n  - validate: {Boolean} whether or not the middleware should validate the request\n      came from Mati. Default true. If the request does not originate from\n      Mati, we will return a text body and a 403.  If there is no configured\n      secret, this is an error condition, so we will returnna 500.\n  Returns a middleware function.\n  Examples:\n  var webhookMiddleware = mati.webhook.middleware();\n  var webhookMiddleware = mati.webhook.middleware('Y0uRS3CR3T'); //init with secret\n   */\n\nconst middleware = (secret) => {\n  // set secret from input or environment variable\n  let sec = process.env.MATI_WEBHOOK_SECRET || secret\n\n  // Create middleware function\n  return function (request, response, next) {\n    // Check for a valid auth token\n    if (!sec) {\n      console.error('[Mati]: Error - Mati secret is required for webhook request validation.')\n      response.type('text/plain')\n        .status(500)\n        .send('Mati Error - we attempted to validate this request without first configuring secret.')\n    } else {\n      // Check that the request originated from Mati\n      const matiHeader = request.headers['x-signature']\n      const payloadBodybody = request.body\n      var valid = validateRequest(matiHeader, sec, payloadBodybody)\n      if (valid) {\n        next()\n      } else {\n        console.log('Mati webhook validation Error - verify your secret')\n        response.type('text/plain')\n          .status(403)\n          .send('Mati webhook validation Error - verify your secret')\n      }\n    };\n  }\n}\n\nexport {\n  validateRequest,\n  middleware\n}\n","import {Mati} from './mati'\nimport {middleware, validateRequest} from './matiWebhook'\n\nmodule.exports = {\n  Mati: Mati,\n  Webhook: {\n    middleware,\n    validateRequest\n  }\n}\n"],"names":["strictUriEncode","matiURL","MatiBase","options","accessToken","clientId","clientSecret","http","axios","create","baseURL","timeout","Date","getTime","getAccessTokenFromCode","authInterceptor","token","getClientId","getClientSecret","method","headers","auth","username","password","data","queryString","stringify","grant_type","scope","url","response","interceptors","request","use","config","originalRequest","isTokenValid","issueToken","setAccessToken","access_token","err","Promise","reject","Error","mt","path","args","getAccessToken","status","_boundary","Mati","opts","id","FormData","undefined","metadata","key","hasOwnProperty","append","file","uploadRequest","identityId","type","documentId","fields","pictureId","global","validateRequest","matiHeader","secret","payloadBody","payload","JSON","computedSignature","crypto","createHmac","update","digest","middleware","sec","process","env","MATI_WEBHOOK_SECRET","next","console","error","send","payloadBodybody","body","valid","log","module","exports","Webhook"],"mappings":"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"}